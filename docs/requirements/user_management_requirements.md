# 웹소설나침반 - 사용자 관리 시스템 요구사항 명세서

## 문서 정보
- **프로젝트명**: 웹소설나침반 (WebNovel Compass)
- **문서 버전**: 1.0
- **작성일**: 2025-07-04
- **문서 유형**: 사용자 관리 시스템 요구사항 명세서

## 목차
1. [개요](#1-개요)
2. [기능 요구사항](#2-기능-요구사항)
3. [비기능 요구사항](#3-비기능-요구사항)
4. [데이터 요구사항](#4-데이터-요구사항)
5. [보안 요구사항](#5-보안-요구사항)
6. [인터페이스 요구사항](#6-인터페이스-요구사항)
7. [제약사항](#7-제약사항)

## 1. 개요

### 1.1 목적
웹소설 추천 시스템에서 사용자 정보를 안전하고 효율적으로 관리하기 위한 사용자 관리 시스템의 요구사항을 정의한다.

### 1.2 범위
- 사용자 회원가입, 로그인, 프로필 관리
- 사용자 취향 및 선호도 관리
- 인증 및 보안 관리
- 개인정보 보호 및 동의 관리
- 소셜 로그인 연동

### 1.3 용어 정의
- **사용자**: 웹소설 추천 서비스를 이용하는 개인
- **프로필**: 사용자의 기본 정보 및 설정
- **취향**: 사용자의 웹소설 선호도 정보
- **세션**: 사용자 로그인 상태 유지 정보

## 2. 기능 요구사항

### 2.1 사용자 계정 관리

#### 2.1.1 회원가입 (REQ-USER-001)
**기능 설명**: 신규 사용자의 계정 생성
**입력**: 이메일, 비밀번호, 닉네임, 개인정보 처리 동의
**처리**: 
- 이메일 중복 검증
- 닉네임 중복 검증
- 비밀번호 정책 검증
- 이메일 인증 발송
**출력**: 계정 생성 성공/실패, 이메일 인증 안내
**예외처리**: 중복 계정, 잘못된 이메일 형식, 비밀번호 정책 위반

#### 2.1.2 로그인 (REQ-USER-002)
**기능 설명**: 기존 사용자의 인증 및 세션 생성
**입력**: 이메일, 비밀번호
**처리**:
- 계정 존재 여부 확인
- 비밀번호 검증
- 계정 상태 확인 (활성/휴면/정지)
- JWT 토큰 생성
**출력**: 로그인 성공/실패, 액세스 토큰, 리프레시 토큰
**예외처리**: 잘못된 인증 정보, 계정 잠금, 정지된 계정

#### 2.1.3 로그아웃 (REQ-USER-003)
**기능 설명**: 사용자 세션 종료
**입력**: 액세스 토큰
**처리**: 토큰 무효화, 세션 삭제
**출력**: 로그아웃 성공 확인

#### 2.1.4 비밀번호 재설정 (REQ-USER-004)
**기능 설명**: 비밀번호 분실 시 재설정
**입력**: 이메일 주소
**처리**:
- 계정 존재 확인
- 재설정 토큰 생성 (30분 유효)
- 이메일 발송
**출력**: 재설정 링크 발송 완료

### 2.2 프로필 관리

#### 2.2.1 프로필 조회 (REQ-USER-005)
**기능 설명**: 사용자 프로필 정보 조회
**입력**: 사용자 ID
**출력**: 프로필 정보 (닉네임, 가입일, 등급, 프로필 이미지 등)

#### 2.2.2 프로필 수정 (REQ-USER-006)
**기능 설명**: 사용자 프로필 정보 수정
**입력**: 수정할 프로필 정보
**처리**: 
- 닉네임 중복 확인
- 프로필 이미지 업로드 및 검증
**출력**: 수정 성공/실패
**예외처리**: 닉네임 중복, 이미지 용량 초과

#### 2.2.3 계정 탈퇴 (REQ-USER-007)
**기능 설명**: 사용자 계정 삭제
**입력**: 사용자 ID, 탈퇴 사유
**처리**:
- 비밀번호 재확인
- 관련 데이터 익명화/삭제 처리
- 30일 복구 기간 설정
**출력**: 탈퇴 처리 완료

### 2.3 사용자 취향 관리

#### 2.3.1 취향 설정 (REQ-USER-008)
**기능 설명**: 사용자의 웹소설 선호도 설정
**입력**: 선호 장르, 기피 장르, 선호 태그, 기피 태그
**처리**: 선호도 정보 저장 및 추천 시스템 연동
**출력**: 설정 완료 확인

#### 2.3.2 취향 분석 (REQ-USER-009)
**기능 설명**: 사용자 행동 기반 자동 취향 분석
**입력**: 사용자 행동 데이터 (평점, 클릭, 읽기 시간)
**처리**: 머신러닝 기반 취향 분석 및 업데이트
**출력**: 업데이트된 취향 정보

### 2.4 소셜 로그인

#### 2.4.1 소셜 계정 연동 (REQ-USER-010)
**기능 설명**: 외부 소셜 계정과 연동
**입력**: 소셜 플랫폼 인증 정보 (Google, Naver, Kakao)
**처리**: OAuth 2.0 인증 처리, 계정 연결
**출력**: 연동 성공/실패

#### 2.4.2 소셜 로그인 (REQ-USER-011)
**기능 설명**: 소셜 계정을 통한 로그인
**입력**: 소셜 플랫폼 인증 토큰
**처리**: 소셜 계정 확인, 기존 계정 매칭, JWT 토큰 생성
**출력**: 로그인 성공, 액세스 토큰

### 2.5 사용자 등급 시스템

#### 2.5.1 등급 계산 (REQ-USER-012)
**기능 설명**: 사용자 활동 기반 등급 산정
**입력**: 사용자 활동 데이터
**처리**: 
- 활동 점수 계산 (로그인, 리뷰 작성, 평점 참여)
- 등급 업데이트 (브론즈, 실버, 골드, 플래티넘, 다이아몬드)
**출력**: 현재 등급, 다음 등급까지 필요 점수

### 2.6 알림 및 설정 관리

#### 2.6.1 알림 설정 (REQ-USER-013)
**기능 설명**: 사용자 알림 설정 관리
**입력**: 알림 유형별 수신 설정 (이메일, 푸시, SMS)
**출력**: 설정 저장 완료

#### 2.6.2 개인화 설정 (REQ-USER-014)
**기능 설명**: 추천 알고리즘 개인화 설정
**입력**: 알고리즘 가중치 설정값
**처리**: 추천 시스템에 설정값 반영
**출력**: 설정 적용 완료

## 3. 비기능 요구사항

### 3.1 성능 요구사항
- **응답 시간**: 모든 API 200ms 이하
- **동시 사용자**: 1,000명 이상 지원
- **가용성**: 99.9% 이상
- **처리량**: 초당 100건 이상의 로그인 처리

### 3.2 확장성 요구사항
- **사용자 확장**: 100만 명까지 확장 가능한 구조
- **지역 확장**: 다국가 서비스 대응 가능
- **마이크로서비스**: 독립적인 서비스 배포 및 확장

### 3.3 사용성 요구사항
- **직관적 UI**: 3단계 이내 모든 기능 접근
- **다국어 지원**: 한국어, 영어 지원
- **접근성**: WCAG 2.1 AA 수준 준수
- **반응형**: 모바일, 태블릿, 데스크톱 지원

## 4. 데이터 요구사항

### 4.1 사용자 기본 정보
```sql
-- 필수 데이터
user_id: BIGINT (Primary Key)
email: VARCHAR(255) (Unique, Not Null)
password_hash: VARCHAR(255) (Not Null)
nickname: VARCHAR(50) (Unique, Not Null)
status: ENUM('ACTIVE', 'DORMANT', 'SUSPENDED', 'DELETED')
created_at: TIMESTAMP
updated_at: TIMESTAMP

-- 선택 데이터
birth_date: DATE
gender: ENUM('MALE', 'FEMALE', 'OTHER', 'PREFER_NOT_TO_SAY')
phone_number: VARCHAR(20)
profile_image_url: VARCHAR(500)
bio: VARCHAR(100)
last_login_at: TIMESTAMP
login_count: INT DEFAULT 0
```

### 4.2 사용자 취향 정보
```sql
preference_id: BIGINT (Primary Key)
user_id: BIGINT (Foreign Key)
preferred_genres: JSON
disliked_genres: JSON
preferred_tags: JSON
disliked_tags: JSON
adult_content_filter: BOOLEAN DEFAULT FALSE
preferred_length: ENUM('SHORT', 'MEDIUM', 'LONG', 'ANY')
preferred_status: ENUM('COMPLETED', 'ONGOING', 'ANY')
recommendation_sensitivity: ENUM('CONSERVATIVE', 'BALANCED', 'ADVENTUROUS')
```

### 4.3 동의 관리 정보
```sql
consent_id: BIGINT (Primary Key)
user_id: BIGINT (Foreign Key)
terms_of_service: BOOLEAN
privacy_policy: BOOLEAN
marketing_email: BOOLEAN
marketing_sms: BOOLEAN
marketing_push: BOOLEAN
personalization: BOOLEAN
cookies: BOOLEAN
consented_at: TIMESTAMP
updated_at: TIMESTAMP
```

### 4.4 소셜 계정 연동
```sql
social_account_id: BIGINT (Primary Key)
user_id: BIGINT (Foreign Key)
provider: ENUM('GOOGLE', 'NAVER', 'KAKAO', 'APPLE')
provider_id: VARCHAR(255)
is_primary: BOOLEAN DEFAULT FALSE
connected_at: TIMESTAMP
```

## 5. 보안 요구사항

### 5.1 인증 보안
- **비밀번호 정책**: 최소 8자, 대소문자+숫자+특수문자 조합 필수
- **해싱**: BCrypt 알고리즘 사용, Salt 추가
- **토큰 보안**: JWT 토큰, 액세스 토큰 15분, 리프레시 토큰 7일
- **세션 관리**: 동시 세션 5개 제한

### 5.2 접근 제어
- **권한 기반**: RBAC (Role-Based Access Control) 적용
- **API 제한**: Rate Limiting 적용 (사용자당 분당 60회)
- **IP 제한**: 의심스러운 IP 자동 차단
- **로그인 제한**: 5회 실패 시 30분 계정 잠금

### 5.3 데이터 보호
- **암호화**: 개인정보 AES-256 암호화
- **전송 보안**: HTTPS/TLS 1.3 필수
- **데이터 익명화**: 분석용 데이터 개인 식별 불가 처리
- **감사 로그**: 모든 민감한 작업 로깅

### 5.4 개인정보 보호
- **GDPR 준수**: EU 개인정보 보호 규정 준수
- **데이터 최소화**: 필요 최소한의 정보만 수집
- **삭제 권리**: 사용자 요청 시 30일 내 완전 삭제
- **투명성**: 개인정보 처리 현황 대시보드 제공

## 6. 인터페이스 요구사항

### 6.1 사용자 인터페이스
- **웹 브라우저**: Chrome, Firefox, Safari, Edge 최신 2개 버전
- **모바일**: iOS 13+, Android 8+ 지원
- **반응형**: 320px ~ 1920px 해상도 대응
- **접근성**: 키보드 네비게이션, 스크린 리더 지원

### 6.2 API 인터페이스
```
POST /api/v1/auth/register        # 회원가입
POST /api/v1/auth/login           # 로그인
POST /api/v1/auth/logout          # 로그아웃
POST /api/v1/auth/refresh         # 토큰 갱신
GET  /api/v1/users/profile        # 프로필 조회
PUT  /api/v1/users/profile        # 프로필 수정
GET  /api/v1/users/preferences    # 취향 조회
PUT  /api/v1/users/preferences    # 취향 설정
POST /api/v1/auth/social/{provider} # 소셜 로그인
```

### 6.3 외부 시스템 연동
- **소셜 로그인**: Google OAuth 2.0, Naver Login, Kakao Login
- **이메일**: SMTP 서버 연동 (SendGrid, AWS SES)
- **SMS**: 문자 발송 서비스 연동
- **파일 저장**: AWS S3, CloudFront CDN

## 7. 제약사항

### 7.1 기술적 제약사항
- **데이터베이스**: PostgreSQL 12+ 사용
- **캐시**: Redis 6+ 사용
- **언어**: Java 17+ (Spring Boot), Python 3.9+ (FastAPI)
- **컨테이너**: Docker 기반 배포

### 7.2 운영 제약사항
- **서비스 시간**: 24시간 365일 운영
- **점검 시간**: 월 1회 최대 2시간 점검
- **백업**: 일일 자동 백업, 30일 보관
- **모니터링**: 실시간 시스템 상태 모니터링

### 7.3 법적 제약사항
- **개인정보보호법**: 국내법 준수
- **GDPR**: EU 서비스 확장 시 준수
- **전자상거래법**: 사용자 정보 5년 보관
- **청소년보호법**: 19세 미만 성인 콘텐츠 차단

### 7.4 비즈니스 제약사항
- **무료 서비스**: 기본 기능 무료 제공
- **프리미엄**: 고급 기능 유료 서비스
- **광고**: 개인정보 기반 타겟팅 광고 금지
- **데이터 판매**: 사용자 개인정보 외부 판매 금지

## 부록

### A. 용어집
- **JWT**: JSON Web Token, 웹 표준 토큰
- **OAuth**: 인증을 위한 개방형 표준
- **RBAC**: 역할 기반 접근 제어
- **GDPR**: EU 일반 데이터 보호 규정
- **TLS**: 전송 계층 보안 프로토콜

### B. 참고 문서
- 웹소설나침반 시스템 아키텍처 문서
- API 설계 가이드라인
- 데이터베이스 설계 문서
- 보안 정책 문서